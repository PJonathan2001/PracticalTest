<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <h1 class="login-title">Iniciar Sesión</h1>
    </div>

    <!-- Estado de inicialización -->
    <div *ngIf="isInitializing" class="text-center">
      <app-loading [isLoading]="true" message="Verificando sesión..."></app-loading>
    </div>

    <!-- Formulario de login (solo mostrar si no está inicializando) -->
    <ng-container *ngIf="!isInitializing">
      <app-alert
        [show]="alert.show"
        [message]="alert.message"
        [type]="alert.type"
        (dismiss)="hideAlert()">
      </app-alert>

      <form class="login-form" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <div class="input-container">
            <div class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/>
              </svg>
            </div>
            <input
              id="email"
              name="email"
              type="email"
              formControlName="email"
              class="form-input"
              placeholder="Tu email"
              autocomplete="email">
          </div>
        </div>

        <div class="form-group">
          <div class="input-container">
            <div class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
              </svg>
            </div>
            <input
              id="password"
              name="password"
              type="password"
              formControlName="password"
              class="form-input"
              placeholder="Tu contraseña"
              autocomplete="current-password">
          </div>
        </div>

        <div class="form-options">
          <a routerLink="/auth/forgot-password" class="forgot-link">
            ¿Olvidaste tu contraseña?
          </a>
        </div>

        <button
          type="submit"
          [disabled]="loginForm.invalid || isLoading"
          class="submit-button">
          <app-loading [isLoading]="isLoading" message="Iniciando sesión..."></app-loading>
          <span *ngIf="!isLoading">Iniciar Sesión</span>
        </button>

        <div class="register-link">
          <span>¿No tienes cuenta? </span>
          <a routerLink="/auth/register" class="register-button">
            Regístrate aquí
          </a>
        </div>
      </form>
    </ng-container>
  </div>
</div>
